def major = 0
def minor = 1
def patch = 0

def versionCode = 0
if (System.getenv("CIRCLE_TAG") != null) {
    // タグあり = リリースビルド
    versionCode = major * 10000 + minor * 100 + patch
} else if ("true" == System.getenv("CI")) {
    // タグ無し & CI = Dev, Stg
    versionCode = System.getenv("CIRCLE_BUILD_NUM") as Integer
} else {
    // ローカルでのビルド
    versionCode = major * 10000 + minor * 100 + patch
}
println("version code: " + versionCode)

project.ext.appVersionName = "$major.$minor.$patch"
project.ext.appVersionCode = versionCode